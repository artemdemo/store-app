{"version":3,"sources":["@traceur/generated/TemplateParser/22","angular2/test/di/async_spec.js","@traceur/generated/TemplateParser/30","@traceur/generated/TemplateParser/21","@traceur/generated/TemplateParser/20","@traceur/generated/TemplateParser/25","@traceur/generated/TemplateParser/29","@traceur/generated/TemplateParser/27"],"names":[],"mappings":"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","file":"angular2/test/di/async_spec.js","sourceRoot":"C:/Sources/git/angular20/dist/js/dev/es6/","sourcesContent":["System.register($__placeholder__0, function($__export) {\n          $__placeholder__1\n        });","import {assert} from \"rtts_assert/rtts_assert\";\nimport {ddescribe,\n  describe,\n  it,\n  iit,\n  xit,\n  expect,\n  beforeEach} from 'angular2/test_lib';\nimport {Injector,\n  Inject,\n  InjectPromise,\n  bind,\n  Key} from 'angular2/di';\nimport {Promise,\n  PromiseWrapper} from 'angular2/src/facade/async';\nclass UserList {}\nfunction fetchUsers() {\n  return PromiseWrapper.resolve(new UserList());\n}\nclass SynchronousUserList {}\nclass UserController {\n  constructor(list) {\n    assert.argumentTypes(list, UserList);\n    this.list = list;\n  }\n}\nObject.defineProperty(UserController, \"parameters\", {get: function() {\n    return [[UserList]];\n  }});\nclass AsyncUserController {\n  constructor(userList) {\n    this.userList = userList;\n  }\n}\nObject.defineProperty(AsyncUserController, \"parameters\", {get: function() {\n    return [[new InjectPromise(UserList)]];\n  }});\nexport function main() {\n  describe(\"async injection\", function() {\n    describe(\"asyncGet\", function() {\n      it('should return a promise', function() {\n        var injector = new Injector([bind(UserList).toAsyncFactory(fetchUsers)]);\n        var p = injector.asyncGet(UserList);\n        expect(p).toBePromise();\n      });\n      it('should return a promise when the binding is sync', function() {\n        var injector = new Injector([SynchronousUserList]);\n        var p = injector.asyncGet(SynchronousUserList);\n        expect(p).toBePromise();\n      });\n      it(\"should return a promise when the binding is sync (from cache)\", function() {\n        var injector = new Injector([UserList]);\n        expect(injector.get(UserList)).toBeAnInstanceOf(UserList);\n        expect(injector.asyncGet(UserList)).toBePromise();\n      });\n      it('should return the injector', function(done) {\n        var injector = new Injector([]);\n        var p = injector.asyncGet(Injector);\n        p.then(function(injector) {\n          expect(injector).toBe(injector);\n          done();\n        });\n      });\n      it('should return a promise when instantiating a sync binding ' + 'with an async dependency', function(done) {\n        var injector = new Injector([bind(UserList).toAsyncFactory(fetchUsers), UserController]);\n        injector.asyncGet(UserController).then(function(userController) {\n          expect(userController).toBeAnInstanceOf(UserController);\n          expect(userController.list).toBeAnInstanceOf(UserList);\n          done();\n        });\n      });\n      it(\"should create only one instance (async + async)\", function(done) {\n        var injector = new Injector([bind(UserList).toAsyncFactory(fetchUsers)]);\n        var ul1 = injector.asyncGet(UserList);\n        var ul2 = injector.asyncGet(UserList);\n        PromiseWrapper.all([ul1, ul2]).then(function(uls) {\n          expect(uls[0]).toBe(uls[1]);\n          done();\n        });\n      });\n      it(\"should create only one instance (sync + async)\", function(done) {\n        var injector = new Injector([UserList]);\n        var promise = injector.asyncGet(UserList);\n        var ul = injector.get(UserList);\n        expect(promise).toBePromise();\n        expect(ul).toBeAnInstanceOf(UserList);\n        promise.then(function(ful) {\n          expect(ful).toBe(ul);\n          done();\n        });\n      });\n      it('should show the full path when error happens in a constructor', function(done) {\n        var injector = new Injector([UserController, bind(UserList).toAsyncFactory(function() {\n          throw \"Broken UserList\";\n        })]);\n        var promise = injector.asyncGet(UserController);\n        PromiseWrapper.then(promise, null, function(e) {\n          expect(e.message).toContain(\"Error during instantiation of UserList! (UserController -> UserList)\");\n          done();\n        });\n      });\n    });\n    describe(\"get\", function() {\n      it('should throw when instantiating an async binding', function() {\n        var injector = new Injector([bind(UserList).toAsyncFactory(fetchUsers)]);\n        expect(() => injector.get(UserList)).toThrowError('Cannot instantiate UserList synchronously. It is provided as a promise!');\n      });\n      it('should throw when instantiating a sync binding with an dependency', function() {\n        var injector = new Injector([bind(UserList).toAsyncFactory(fetchUsers), UserController]);\n        expect(() => injector.get(UserController)).toThrowError('Cannot instantiate UserList synchronously. It is provided as a promise! (UserController -> UserList)');\n      });\n      it('should resolve synchronously when an async dependency requested as a promise', function() {\n        var injector = new Injector([bind(UserList).toAsyncFactory(fetchUsers), AsyncUserController]);\n        var controller = injector.get(AsyncUserController);\n        expect(controller).toBeAnInstanceOf(AsyncUserController);\n        expect(controller.userList).toBePromise();\n      });\n      it('should wrap sync dependencies into promises if required', function() {\n        var injector = new Injector([bind(UserList).toFactory(() => new UserList()), AsyncUserController]);\n        var controller = injector.get(AsyncUserController);\n        expect(controller).toBeAnInstanceOf(AsyncUserController);\n        expect(controller.userList).toBePromise();\n      });\n    });\n  });\n}\n\n//# sourceMappingURL=C:/Sources/git/angular20/modules/angular2/test/di/async_spec.map\n\n//# sourceMappingURL=./async_spec.map","\n        $__export($__placeholder__0, $__placeholder__1)\n      ","return {\n      setters: $__placeholder__0,\n      execute: $__placeholder__1\n    }","function($__m) {\n          $__placeholder__0\n        }","$__placeholder__0 = $__m.$__placeholder__1;","$__placeholder__0 = $__placeholder__1","function() {\n          var $__placeholder__0 = $__placeholder__1;\n          return ($traceurRuntime.createClass)($__placeholder__2, $__placeholder__3,\n                                               $__placeholder__4);\n        }()"]}